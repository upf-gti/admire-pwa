(this["webpackJsonpadmire-pwa"]=this["webpackJsonpadmire-pwa"]||[]).push([[5],{306:function(e,t,n){"use strict";n.r(t);var s=n(6),c=n(16),i=n.n(c),a=n(1),o=n(299),r=n(89),l=n(49),d=n(33),u=n(148),j=n(0),v=performance.now(),b=new Array(10);function x(e){var t=e.stream,n=e.show,c=Object(a.useRef)(),o=Object(a.useRef)(),r=Object(a.useRef)(),l=Object(a.useRef)(),d=Object(a.useRef)(),u=Object(a.useState)(0),x=Object(s.a)(u,2),m=x[0],f=x[1];function h(){var e,t;if(!(performance.now()-v<24)){v=performance.now();var n=new Uint8Array(null===(e=r.current)||void 0===e?void 0:e.frequencyBinCount);null===(t=r.current)||void 0===t||t.getByteFrequencyData(n);var s=n.reduce((function(e,t){return e+t}),0)/n.length;b.shift(),b.push(Math.round(s)),window.microphone_gain_data=b,f(s)}}return window.ctx=o,Object(a.useEffect)((function(){var e,n,s,c;o.current=new AudioContext,r.current=null===(e=o.current)||void 0===e?void 0:e.createAnalyser(),l.current=null===(n=o.current)||void 0===n?void 0:n.createMediaStreamSource(t),d.current=null===(s=o.current)||void 0===s?void 0:s.createScriptProcessor(256,1,1),r.current.smoothingTimeConstant=.8,r.current.fftSize=1024,l.current.connect(r.current),r.current.connect(d.current),d.current.connect(null===(c=o.current)||void 0===c?void 0:c.destination),d.current.onaudioprocess=h}),[t]),Object(a.useEffect)((function(){var e;if(o){var t;if(n)null===(e=o.current)||void 0===e||e.resume();else null===(t=o.current)||void 0===t||t.suspend(),f(0);return function(){var e;null===(e=o.current)||void 0===e||e.suspend()}}}),[n]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{ref:c,className:"jsx-445103720 pids-wrapper",children:Array.from({length:10},(function(e,t){return Object(j.jsx)("div",{style:{background:10*t<m?"#69ce2b":"#e6e7e8"},className:"jsx-445103720 pid"},t)}))}),Object(j.jsx)(i.a,{id:"445103720",children:[".pids-wrapper{width:100%;line-height:1.5rem;}",".pid{width:calc(10% - 2px);height:10px;display:inline-block;margin:1px;}"]})]})}var m=n(40),f=(n(332),["None","Face","Torso","Body"]);t.default=function(){var e,t,n,c,v,b,h,p,O,g,N,w,S=Object(a.useContext)(m.a),y=Object(a.useState)(!1),k=Object(s.a)(y,2),C=k[0],A=k[1],R=Object(a.useState)("None"),V=Object(s.a)(R,2),I=(V[0],V[1]);return Object(a.useEffect)((function(){return S.init(),function(){S.stop(),A(!1)}}),[]),Object(j.jsxs)("div",{id:"devices",className:"jsx-2619548114",children:[Object(j.jsx)("h3",{className:"jsx-2619548114 pt-2",children:Object(j.jsx)("b",{className:"jsx-2619548114",children:"Step 1: Devices"})}),Object(j.jsxs)(o.a,{id:"devices-row",children:[Object(j.jsx)(r.a,{md:6,children:Object(j.jsx)(u.a,{id:"local",stream:S.localStream,isLocal:!C})}),Object(j.jsxs)(r.a,{md:6,children:[Object(j.jsx)(l.a,{className:"pb-1",controlId:"floatingSelect",label:Object(j.jsxs)("span",{className:"jsx-2619548114",children:[" ",Object(j.jsx)("i",{className:"jsx-2619548114 bi bi-mask"})," Mask"]}),children:Object(j.jsx)(d.a.Select,{onChange:function(e){var t=e.target;S.setMask(t.value),I(t.value)},defaultValue:S.settings.mask,children:f.map((function(e,t){return Object(j.jsx)("option",{value:e,className:"jsx-2619548114",children:e},t)}))})}),Object(j.jsx)(l.a,{className:"pb-1",controlId:"floatingSelect",label:Object(j.jsxs)("span",{className:"jsx-2619548114",children:[" ",Object(j.jsx)("i",{className:"jsx-2619548114 bi bi-camera-video"})," Video devices"]}),children:Object(j.jsxs)(d.a.Select,{value:null!==(e=null===(t=S.settings)||void 0===t?void 0:t.video)&&void 0!==e?e:"None",onChange:function(e){var t=e.target;S.setVideo(t.value)},children:[(null===(n=S.devices)||void 0===n?void 0:n.video)&&Object.keys(null===(c=S.devices)||void 0===c?void 0:c.video).map((function(e,t){return Object(j.jsx)("option",{value:e,className:"jsx-2619548114",children:e},t)})),!(null!==(v=S.devices)&&void 0!==v&&v.video)&&Object(j.jsx)("option",{className:"jsx-2619548114",children:"No video devices found"},0)]})}),Object(j.jsx)(l.a,{className:"pb-1",controlId:"floatingSelect",label:Object(j.jsxs)("span",{className:"jsx-2619548114",children:[" ",Object(j.jsx)("i",{className:"jsx-2619548114 bi bi-collection"})," Video resolutions"]}),children:Object(j.jsxs)(d.a.Select,{value:null!==(b=null===(h=S.settings)||void 0===h?void 0:h.resolution)&&void 0!==b?b:"Undefined",onChange:function(e){var t,n,s=e.target;S.setVideo(null!==(t=null===(n=S.settings)||void 0===n?void 0:n.video)&&void 0!==t?t:"None",s.value)},children:[S.resolutions&&Object.keys(S.resolutions).map((function(e,t){return Object(j.jsx)("option",{value:e,className:"jsx-2619548114",children:e},t)})),!S.resolutions&&Object(j.jsx)("option",{className:"jsx-2619548114",children:"No video resolutions found"},0)]})}),Object(j.jsx)(l.a,{className:"pb-1",controlId:"floatingSelect",label:Object(j.jsxs)("span",{className:"jsx-2619548114",children:[" ",Object(j.jsx)("i",{className:"jsx-2619548114 bi bi-mic"})," Audio devices"]}),children:Object(j.jsxs)(d.a.Select,{value:null!==(p=null===(O=S.settings)||void 0===O?void 0:O.audio)&&void 0!==p?p:"None",onChange:function(e){var t=e.target;return S.setAudio(t.value)},children:[(null===(g=S.devices)||void 0===g?void 0:g.audio)&&Object.keys(null===(N=S.devices)||void 0===N?void 0:N.audio).map((function(e,t){return Object(j.jsx)("option",{value:e,className:"jsx-2619548114",children:e},t)})),!(null!==(w=S.devices)&&void 0!==w&&w.audio)&&Object(j.jsx)("option",{className:"jsx-2619548114",children:"No audio devices found"},0)]})}),Object(j.jsxs)("div",{className:"jsx-2619548114 d-flex",children:[Object(j.jsx)(d.a.Switch,{id:"hear-switch",label:"Test",className:"me-2 user-select-none",name:"test-input",onChange:function(e){return A((function(e){return!e}))},defaultChecked:C}),Object(j.jsx)(x,{stream:S.localStream,show:C})]})]})]}),Object(j.jsx)(i.a,{id:"2619548114",children:["#page video{object-fit:cover !important;max-height:25vh;}","#devices-row{overflow-y:scroll;}","@media only screen and (orientation:landscape) and (max-height:671px){#devices .row{-webkit-flex-direction:row !important;-ms-flex-direction:row !important;flex-direction:row !important;}#devices .row .col{-webkit-align-self:start;-ms-flex-item-align:start;align-self:start;}}"]})]})}}}]);
//# sourceMappingURL=5.29655f3a.chunk.js.map