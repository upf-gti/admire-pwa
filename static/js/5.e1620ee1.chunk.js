(this["webpackJsonpadmire-pwa"]=this["webpackJsonpadmire-pwa"]||[]).push([[5],{302:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return k}));var n=a(12),r=a.n(n),c=a(15),s=a(28),o=a(6),i=a(16),l=a.n(i),u=a(1),d=a(298),j=a(89),h=a(328),m=a(33),p=a(49),x=a(40),f=a(329),b=a(27),w=a(146),O=a(0);console.warn=function(){};var g,v=null,y=["None","Face","Torso","Body"];function k(){var e=Object(u.useState)({x:0,y:0,w:0,h:0}),t=Object(o.a)(e,2),a=t[0],n=t[1],i=Object(u.useRef)(null),k=Object(u.useState)("None"),M=Object(o.a)(k,2),N=(M[0],M[1]),S=Object(u.useContext)(x.a);function Y(e){e.image;var t,a=e.detections,r=Object(s.a)(a);try{for(r.s();!(t=r.n()).done;){var c=t.value,o=(c.L,c.boundingBox);c.landmarks;n({x:o.xCenter,y:o.yCenter,w:o.width,h:o.height})}}catch(i){r.e(i)}finally{r.f()}}function C(){return(C=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=new f.FaceDetection({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.4.1628005423/".concat(e)}}),window.faceDetection=v,v.setOptions({selfieMode:!0,model:"short",minDetectionConfidence:.5}),v.onResults(Y),e.next=6,v.initialize();case 6:g=setInterval(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,v.send({image:i.current});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])}))),120);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(u.useEffect)((function(){if(S.ready)return function(){C.apply(this,arguments)}(),i.current=document.querySelector("#pose video"),i.current.srcObject=S.localStream,i.current.play(),function(){clearInterval(g)}}),[S.ready,S.localStream]);var D=Math.max(0,Math.min(100,100-400*a.w)),F=Math.max(0,Math.min(100,100*a.w)),I=Math.max(0,Math.min(100,100-D-F)),R="\n        The pose detection step is used to detect the pose of the person in the image. Position yourself centered on the image within the green valid range.\n        If the conditions are not met, reposition yourself or the camera.\n        ".concat(a.w>.3?"* \u274c You are too close to the camera.":"* \u2714\ufe0f Distance to camera looks good.","\n        ").concat(a.y-a.h<0?"* \u274c You are too far from the camera.":a.y-a.h<.13?"* \u26a0\ufe0f Your face is too near to the top margin.":"* \u2714\ufe0f Got enough space on top.","\n        ").concat(Math.abs(a.x-.5)>.01*D?"* \u274c You are not centered at all.":Math.abs(a.x-.5)>.01*F?"* \u26a0\ufe0f Not enough margin of movement.":"* \u2714\ufe0f You got enough space on the sides","\n    ");return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{id:"pose",className:"jsx-310578146",children:[Object(O.jsx)("h3",{className:"jsx-310578146 pt-2",children:Object(O.jsx)("b",{className:"jsx-310578146",children:"Step 3: Positioning in frame"})}),Object(O.jsxs)(d.a,{children:[Object(O.jsxs)(j.a,{md:6,children:[Object(O.jsx)(w.a,{id:"local-pose",stream:S.localStream,style:{transform:"rotateY(180deg)",width:"100%"},isLocal:!0}),Object(O.jsxs)(h.a,{children:[Object(O.jsx)(h.a,{variant:"danger",now:.5*I},1),Object(O.jsx)(h.a,{variant:"warning",now:.5*F},2),Object(O.jsx)(h.a,{variant:"success",now:D},3),Object(O.jsx)(h.a,{variant:"warning",now:.5*F},4),Object(O.jsx)(h.a,{variant:"danger",now:.5*I},5)]}),Object(O.jsx)(m.a.Range,{id:"range",value:100*a.x})]}),Object(O.jsxs)(j.a,{md:6,children:[Object(O.jsx)(p.a,{className:"pb-1",controlId:"floatingSelect",label:Object(O.jsxs)("span",{className:"jsx-310578146",children:[" ",Object(O.jsx)("i",{className:"jsx-310578146 bi bi-mask"})," Mask"]}),children:Object(O.jsx)(m.a.Select,{onChange:function(e){var t=e.target;S.setMask(t.value),N(t.value)},defaultValue:S.settings.mask,children:y.map((function(e,t){return Object(O.jsx)("option",{value:e,className:"jsx-310578146",children:e},t)}))})}),Object(O.jsx)(b.a,{className:"user-select-none",children:R})]})]})]}),Object(O.jsx)(l.a,{id:"310578146",children:["@media only screen and (orientation:landscape) and (max-height:671px){#pose .row{-webkit-flex-direction:row !important;-ms-flex-direction:row !important;flex-direction:row !important;}#pose .row .col{-webkit-align-self:start;-ms-flex-item-align:start;align-self:start;}}"]})]})}}}]);
//# sourceMappingURL=5.e1620ee1.chunk.js.map