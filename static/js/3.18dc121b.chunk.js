(this["webpackJsonpadmire-pwa"]=this["webpackJsonpadmire-pwa"]||[]).push([[3],{460:function(e,t,n){"use strict";n.r(t);var s=n(23),c=n.n(s),i=n(24),a=n(1),o=n(5),l=n(0),r=performance.now();function d(e){var t=e.stream,n=e.show,s=Object(a.useState)(null),i=Object(o.a)(s,2),d=i[0],u=i[1],j=Object(a.useState)(null),b=Object(o.a)(j,2),v=b[0],x=b[1],O=Object(a.useState)(null),m=Object(o.a)(O,2),p=m[0],f=m[1],h=Object(a.useState)(null),g=Object(o.a)(h,2),N=g[0],w=g[1],S=Object(a.useState)(0),y=Object(o.a)(S,2),k=y[0],C=y[1],A=Object(a.useRef)();function V(){if(!(performance.now()-r<24)){r=performance.now();var e=new Uint8Array(v.frequencyBinCount);v.getByteFrequencyData(e);var t=e.reduce((function(e,t){return e+t}),0)/e.length;C(t)}}return window.ctx=d,Object(a.useEffect)((function(){d=new AudioContext,v=d.createAnalyser(),p=d.createMediaStreamSource(t),N=d.createScriptProcessor(256,1,1),v.smoothingTimeConstant=.8,v.fftSize=1024,p.connect(v),v.connect(N),N.connect(d.destination),N.onaudioprocess=V,u(d),x(v),f(p),w(N)}),[t]),Object(a.useEffect)((function(){if(d){switch(n){case!0:return d.resume();case!1:return d.suspend()}return function(){d.suspend()}}}),[n]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{ref:A,className:"jsx-3208678660 pids-wrapper",children:Array.from({length:10},(function(e,t){return Object(l.jsx)("div",{style:{background:10*t<k?"#69ce2b":"#e6e7e8"},className:"jsx-3208678660 pid"},t)}))}),Object(l.jsx)(c.a,{id:"3208678660",children:[".pids-wrapper{width:100%;}",".pid{width:calc(10% - 10px);height:10px;display:inline-block;margin:5px;}"]})]})}var u=n(478),j=n(198),b=n(157),v=n(216),x=n(51),O=n(152);t.default=function(){var e,t,n,s,o,r,m,p,f,h,g,N,w=Object(a.useContext)(x.a);return Object(a.useEffect)((function(){return w.init(),function(){w.stop()}})),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(i.a,{children:"\n        # P1        \n        "}),Object(l.jsxs)(u.a,{children:[Object(l.jsx)(j.a,{xs:12,sm:5,className:"pb-2",children:Object(l.jsx)(O.a,{id:"local",stream:w.localStream,local:!0})}),Object(l.jsxs)(j.a,{xs:12,sm:7,children:[Object(l.jsx)(b.a,{className:"pb-1",controlId:"floatingSelect",label:Object(l.jsxs)("span",{className:"jsx-3089624982",children:[" ",Object(l.jsx)("i",{className:"jsx-3089624982 bi bi-camera-video"})," Video devices"]}),children:Object(l.jsxs)(v.a.Select,{value:null!==(e=null===(t=w.settings)||void 0===t?void 0:t.video)&&void 0!==e?e:"None",onChange:function(e){var t=e.target;w.setVideo(t.value)},children:[(null===(n=w.devices)||void 0===n?void 0:n.video)&&Object.keys(null===(s=w.devices)||void 0===s?void 0:s.video).map((function(e,t){return Object(l.jsx)("option",{value:e,className:"jsx-3089624982",children:e},t)})),!(null!==(o=w.devices)&&void 0!==o&&o.video)&&Object(l.jsx)("option",{className:"jsx-3089624982",children:"No video devices found"},0)]})}),Object(l.jsx)(b.a,{className:"pb-1",controlId:"floatingSelect",label:Object(l.jsxs)("span",{className:"jsx-3089624982",children:[" ",Object(l.jsx)("i",{className:"jsx-3089624982 bi bi-camera-video"})," Video resolutions"]}),children:Object(l.jsxs)(v.a.Select,{value:null!==(r=null===(m=w.settings)||void 0===m?void 0:m.resolution)&&void 0!==r?r:"Undefined",onChange:function(e){var t,n,s=e.target;w.setVideo(null!==(t=null===(n=w.settings)||void 0===n?void 0:n.video)&&void 0!==t?t:"None",s.value)},children:[w.resolutions&&Object.keys(w.resolutions).map((function(e,t){return Object(l.jsx)("option",{value:e,className:"jsx-3089624982",children:e},t)})),!w.resolutions&&Object(l.jsx)("option",{className:"jsx-3089624982",children:"No video resolutions found"},0)]})}),Object(l.jsx)(b.a,{className:"pb-1",controlId:"floatingSelect",label:Object(l.jsxs)("span",{className:"jsx-3089624982",children:[" ",Object(l.jsx)("i",{className:"jsx-3089624982 bi bi-mic"})," Audio devices"]}),children:Object(l.jsxs)(v.a.Select,{value:null!==(p=null===(f=w.settings)||void 0===f?void 0:f.audio)&&void 0!==p?p:"None",onChange:function(e){var t=e.target;return w.setAudio(t.value)},children:[(null===(h=w.devices)||void 0===h?void 0:h.audio)&&Object.keys(null===(g=w.devices)||void 0===g?void 0:g.audio).map((function(e,t){return Object(l.jsx)("option",{value:e,className:"jsx-3089624982",children:e},t)})),!(null!==(N=w.devices)&&void 0!==N&&N.audio)&&Object(l.jsx)("option",{className:"jsx-3089624982",children:"No audio devices found"},0)]})}),Object(l.jsx)(d,{stream:w.localStream,show:!0})]})]}),Object(l.jsx)(c.a,{id:"3089624982",children:["#page video{object-fit:contain !important;max-height:25vh;}"]})]})}}}]);
//# sourceMappingURL=3.18dc121b.chunk.js.map