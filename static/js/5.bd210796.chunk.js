(this["webpackJsonpadmire-pwa"]=this["webpackJsonpadmire-pwa"]||[]).push([[5],{306:function(e,t,i){"use strict";i.r(t);var s=i(6),a=i(16),n=i.n(a),r=i(1),c=i(298),o=i(89),l=i(324),d=i(327),j=i(40);var h=i(129),m=i(0),b=new function(){var e=document.createElement("canvas"),t=e.getContext("2d");return{analyze:function(i){if(!i)return{brightness:0,contrast:0};var s=i.videoWidth,a=i.videoHeight;if(s<=0||a<=0)return{brightness:0,contrast:0};e.width=s,e.height=a,t.drawImage(i,0,0,s,a);for(var n=t.getImageData(0,0,s,a).data,r=0,c=0,o=1,l=0;l<n.length;l+=4){r+=(.299*(n[l]/255)+.587*(n[l+1]/255)+.114*(n[l+2]/255)-r)/o,o++}for(var d=0;d<n.length;d+=4){var j=.299*(n[d]/255)+.587*(n[d+1]/255)+.114*(n[d+2]/255);c+=Math.pow(j-r,2)}return c/=o,{brightness:r,contrast:Math.sqrt(c)/r}}}};t.default=function(){var e=Object(r.useContext)(j.a),t=Object(r.useState)(!1),i=Object(s.a)(t,2),a=i[0],x=i[1],g=Object(r.useState)(!1),u=Object(s.a)(g,2),v=u[0],f=u[1];return Object(r.useEffect)((function(){e.init();var t=setInterval((function(){f(!0);var e=document.querySelector(".analysedVideo"),t=b.analyze(e.querySelector("video"));document.getElementById("brightnessText").innerHTML=Math.floor(100*t.brightness)+"%",document.getElementById("contrastText").innerHTML=Math.floor(100*t.contrast)+"%",setTimeout((function(){return f(!1)}),750)}),2e3);return function(){e.stop(),x(!1),clearInterval(t)}}),[]),Object(m.jsxs)("div",{id:"devices",className:"jsx-3927278628",children:[Object(m.jsx)("h3",{className:"jsx-3927278628 pt-2",children:Object(m.jsx)("b",{className:"jsx-3927278628",children:"Environment"})}),Object(m.jsxs)(c.a,{id:"devices-row",children:[Object(m.jsx)(o.a,{md:6,children:Object(m.jsx)(h.a,{id:"local",stream:e.localStream,isLocal:!a,className:"analysedVideo"})}),Object(m.jsxs)(o.a,{md:6,children:[Object(m.jsxs)("h4",{className:"jsx-3927278628 pt-2",children:["Lighting conditions ",v?Object(m.jsx)(l.a,{style:{verticalAlign:"-0.02em",color:"lightskyblue"},animation:"grow",size:"sm"}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsx)(d.a,{style:{width:"18rem",marginTop:"0.5rem"},children:Object(m.jsxs)(d.a.Body,{children:[Object(m.jsxs)(d.a.Title,{children:[Object(m.jsx)("i",{className:"jsx-3927278628 bi bi-sm bi-brightness-high"}),"  Brightness"]}),Object(m.jsx)(d.a.Text,{id:"brightnessText",children:"-"})]})}),Object(m.jsx)(d.a,{style:{width:"18rem",marginTop:"0.25rem"},children:Object(m.jsxs)(d.a.Body,{children:[Object(m.jsxs)(d.a.Title,{children:[Object(m.jsx)("i",{className:"jsx-3927278628 bi bi-sm bi-diamond-half"}),"  Contrast "]}),Object(m.jsx)(d.a.Text,{id:"contrastText",children:"-"})]})})]})]}),Object(m.jsx)(n.a,{id:"3927278628",children:[".bi.bi-sm{font-size:1rem;vertical-align:0.07rem;}","#page video{object-fit:cover !important;max-height:25vh;}","#devices-row{overflow-y:scroll;}","@media only screen and (orientation:landscape) and (max-height:671px){#devices .row{-webkit-flex-direction:row !important;-ms-flex-direction:row !important;flex-direction:row !important;}#devices .row .col{-webkit-align-self:start;-ms-flex-item-align:start;align-self:start;}}"]})]})}}}]);
//# sourceMappingURL=5.bd210796.chunk.js.map